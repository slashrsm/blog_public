<!DOCTYPE html>
<html dir="ltr" lang="en" prefix="content: https://purl.org/rss/1.0/modules/content/  dc: https://purl.org/dc/terms/  foaf: https://xmlns.com/foaf/0.1/  og:
https://ogp.me/ns#  rdfs: https://www.w3.org/2000/01/rdf-schema#  schema: https://schema.org/  sioc: https://rdfs.org/sioc/ns#  sioct:
https://rdfs.org/sioc/types#  skos: https://www.w3.org/2004/02/skos/core#  xsd: https://www.w3.org/2001/XMLSchema# ">
 <!-- Added by HTTrack -->
 <meta content="text/html;charset=utf-8" http-equiv="content-type"/>
 <!-- /Added by HTTrack -->
 <head>
  <meta charset="utf-8"/>
  <meta content="Discover how Gander pinpointed four critical bottlenecks in Drupal core, leading to significant performance improvements." name="description"/>
  <meta content="Drupal 9 (https://www.drupal.org)" name="Generator"/>
  <meta content="width" name="MobileOptimized"/>
  <meta content="true" name="HandheldFriendly"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <link href="../themes/custom/janezurevc_name/favicon/index.ico" rel="icon" type="image/vnd.microsoft.icon"/>
  <link href="https://www.tag1.com/blog/4-important-improvements-drupal-core-performance/" rel="canonical"/>
  <link href="4-important-improvements-drupal-core-performance/" rel="shortlink"/>
  <title>
   4 Important Improvements to Drupal Core Performance | Janez Urevc
  </title>
  <link href="../core/modules/system/css/components/align.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/fieldgroup.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/container-inline.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/clearfix.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/details.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/hidden.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/item-list.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/js.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/nowrap.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/position-container.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/progress.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/reset-appearance.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/resize.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/sticky-header.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/system-status-counter/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/system-status-report-counters/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/system-status-report-general-info/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/tablesort.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../core/modules/system/css/components/tree-child.module/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.css"
integrity="sha256-0XAFLBbK7DgQ8t7mRWU5BF2OMm9tjtfH945Z7TTeNIo=" media="all" rel="stylesheet"/>
  <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@unicorn-fail/drupal-bootstrap-styles@0.0.2/dist/3.4.0/8.x-3.x/drupal-bootstrap.css"
integrity="sha512-j4mdyNbQqqp+6Q/HtootpbGoc2ZX0C/ktbXnauPFEz7A457PB6le79qasOBVcrSrOBtGAm0aVU2SOKFzBl6RhA==" media="all" rel="stylesheet"/>
  <link href="../themes/custom/bootstrap_clean_blog/css/clean-blog/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="../themes/custom/bootstrap_clean_blog/css/theme/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" media="all" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" media="all" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" media="all"
rel="stylesheet"/>
  <link href="../themes/custom/janezurevc_name/theme/index.css?s16r9a" media="all" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/styles/androidstudio.min.css" media="all" rel="stylesheet"/>
 </head>
 <body class="path-node node--type-article">
  <a class="visually-hidden focusable skip-link" href="#main-content">
   Skip to main content
  </a>
  <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas="">
   <nav class="navbar navbar-default">
    <div class="container-fluid">
     <!-- Brand and toggle get grouped for better mobile display -->
     <div class="navbar-header page-scroll">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
       <span class="sr-only">
        Toggle navigation
       </span>
       <span class="icon-bar">
       </span>
       <span class="icon-bar">
       </span>
       <span class="icon-bar">
       </span>
      </button>
      <a class="navbar-brand" href="/" title="Home">
       Janez Urevc
      </a>
     </div>
     <!-- Collect the nav links, forms, and other content for toggling -->
     <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <nav aria-labelledby="block-mainnavigation-menu" id="block-mainnavigation" role="navigation">
       <h2 class="sr-only" id="block-mainnavigation-menu">
        Main navigation
       </h2>
       <ul class="nav navbar-nav navbar-right">
        <li>
         <a href="/about.html">
          About
         </a>
        </li>
        <li>
         <a href="/get-in-touch.html">
          Get in touch
         </a>
        </li>
       </ul>
      </nav>
     </div>
     <!-- /.navbar-collapse -->
    </div>
   </nav>
   <!-- Page Header -->
   <!-- Set your background image for this header on the line below. -->
   <header class="intro-header" style="background-image: url('../themes/custom/janezurevc_name/images/default_bg/index.jpg')">
    <div class="container">
     <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
       <div class="post-heading">
        <h1>
         4 Important Improvements to Drupal Core Performance
        </h1>
        <span class="subheading">
         Gander Pinpoints Key Bottlenecks
        </span>
       </div>
      </div>
     </div>
    </div>
   </header>
   <!-- Post Content -->
   <article>
    <div class="container">
     <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
       <a id="main-content">
       </a>
       <div class="region region-content">
        <div class="hidden" data-drupal-messages-fallback="">
        </div>
        <article role="article">
         <div class="post-meta submitted">
          <article about="/users/slashrsm" typeof="schema:Person">
          </article>
          <div class="post-date">
           <span>
            Wed, 01.05.2024
           </span>
          </div>
         </div>
         <div class="content">
          <div class="field field--name-body field--type-text-with-summary field--label-hidden field--item">
           <p>
            <em>
             This post was originally published on
             <a href="https://www.tag1.com/blog/4-important-improvements-drupal-core-performance/">
              Tag1.com
             </a>
             .
            </em>
           </p>
           <p>
            Performance optimization is vital for Drupal core, especially as the content management system of choice for 1.7 million websites worldwide
according to
            <a href="https://techjury.net/blog/drupal-statistics/">
             TechJury
            </a>
            . Drupal 10.2 and newer come with the
            <a href="https://www.drupal.org/docs/develop/performance/gander">
             built-in performance testing framework Gander
            </a>
            . Gander offers a systematic approach to identifying and resolving performance bottlenecks, ensuring Drupal core &ndash; and your Drupal
installations &ndash; run efficiently. This innovative solution came about from combined efforts involving the
            <a href="https://developer.chrome.com/">
             Google Chrome team
            </a>
            and Tag1 Consulting.
           </p>
           <p>
            Curious about Gander and its potential impact on your workflows and site performance? This testing framework was instrumental in four important
improvements made to Drupal core performance. Let's break down each bottleneck and the solutions that led to these improvements.
           </p>
           <h2>
            1. Streamlining the Login Procedure
           </h2>
           <p>
            Using Gander, inefficient database queries in the user login and authentication process were identified. Issue
            <a href="https://www.drupal.org/project/drupal/issues/3410582">
             #3410582
            </a>
            highlights that user logins triggered duplicate entity queries. First, the user name was checked via an entity query to confirm if it matched a
blocked user. Then another entity query checked if the user name matched a not-blocked user before checking flood control by username. After the user name
passed flood control, a call to UserAuth::authenticate() with the username and password reran the second entity query. The resolution for the duplicate entity
queries had to take into consideration related issues
            <a href="https://www.drupal.org/project/drupal/issues/3425342">
             #3425342
            </a>
            and
            <a href="https://www.drupal.org/project/drupal/issues/3410707">
             #3410707
            </a>
            , but it successfully reduced query times significantly. This enhancement of Drupal core led to a more responsive and efficient authentication
process, which in turn improves the overall user experience.
           </p>
           <h2>
            2. Optimizing the Umami Demo Installation Profile
           </h2>
           <p>
            The Umami demo installation profile, used for demonstration and educational purposes within Drupal, was loading its main hero image twice. This
redundancy not only affected the page load time but also had a negative impact on the Largest Contentful Paint (LCP) metric, a crucial factor for user
experience and SEO performance. (See issue
            <a href="https://www.drupal.org/project/drupal/issues/3349447">
             #3349447
            </a>
            .)
           </p>
           <p>
            Using Gander, the core contributors identified the cause of the problem and implemented a fix to ensure that the hero image loads one time. This
was achieved through adjustments in the way Drupal handles the image loading process within the Umami demo profile.
           </p>
           <p>
            The fix had a positive impact on the performance of websites using the Umami demo profile. By loading the hero image only once, the page load times
were reduced, leading to a better user experience and improved LCP metrics for SEO ranking.
           </p>
           <h2>
            3. Improving BigPipe Requests
           </h2>
           <p>
            In
            <a href="https://www.drupal.org/docs/8/core/modules/big-pipe/overview">
             BigPipe
            </a>
            , a Drupal core module that can enhance website performance, redundant session data queries in the requests were causing delays in initial
responses. Because BigPipe executed rendering after the initial response, session closure was necessary. However, this led to the system having to re-read
session data, causing duplicate session read queries within a single request.
           </p>
           <p>
            Gander detected the problem. To address this issue, the team focused on optimizing session data handling and implementing a static cache mechanism.
By adding session data to a property on the session handler, the data could be retrieved if the session was read twice. Additionally, a new
ResponseKeepSessionOpenInterface was introduced, enabling BigPipeResponse to implement session closure without the need to reload session data. This solution
effectively streamlined BigPipe responses, eliminating redundant queries, minimizing queries, and enhancing overall system efficiency.
           </p>
           <p>
            Implementing the solutions significantly improved Drupal's performance for sites using the BigPipe module. By minimizing redundant session data
queries, pages load faster and site responsiveness improves. (See issue
            <a href="https://www.drupal.org/project/drupal/issues/3414287">
             #3414287
            </a>
            .)
           </p>
           <h2>
            4. Refining Cache Tag Checking Function
           </h2>
           <p>
            Another issue detected by Gander was that Cache tags, responsible for managing cache invalidations, were inefficiently processed even when no
actionable data was present. This resulted in unnecessary operations, contributing to increased CPU load and processing time. Issue
            <a href="https://www.drupal.org/project/drupal/issues/3422981">
             #3422981
            </a>
            goes into more detail.
           </p>
           <p>
            To address this issue, the developers introduced a mechanism to bypass unnecessary processing for empty arrays. By implementing early return logic,
the system now skips processing cache tags when no actionable data is present, significantly reducing unnecessary operations.
           </p>
           <p>
            This optimization not only streamlines cache tag handling but also contributes to overall site performance by alleviating CPU load and reducing
processing time. This enhances the efficiency of Drupal's cache management system, ensuring smoother site operations for developers and site owners alike.
           </p>
           <h2>
            Gander Is Improving Drupal Core &ndash; And More
           </h2>
           <p>
            As these important Drupal core improvements demonstrate, Gander is a revolutionary tool now available as part of Drupal core. This powerful
performance testing framework provides developers with sophisticated means to detect and, therefore, correct performance issues, marking a significant step
forward for Drupal's performance optimization. For ongoing updates and insights into Gander's evolution, visit the
            <a href="https://www.tag1.com/gander/">
             Gander cornerstone page
            </a>
            , where you'll find a wealth of resources dedicated to its development and application.
           </p>
           <p>
            Ready to optimize your Drupal site's performance with Gander? Begin exploring its capabilities today by
            <a href="https://www.drupal.org/docs/develop/performance/gander/quickstart">
             following the Quickstart guide
            </a>
            in the official documentation.
           </p>
           <h2>
            Get the Scoop on Gander: Meet Us at DrupalCon Portland!
           </h2>
           <p>
            Join us at DrupalCon Portland for a
            <a href="https://events.drupal.org/portland2024/session/gander-drupal-core-performance-testing-framework">
             deep dive into Gander
            </a>
            on Tuesday, May 7, 2024, at 16:10 PDT in Room B117-119. We'll explain its motivation, basics, and demonstrate its use for Drupal Core development
and on your own site. Don't miss out on the opportunity to be part of pushing the boundaries of what's possible with Drupal performance. We will also present
Gander as part of the
            <a href="https://events.drupal.org/portland2024/session/drupal-project-initiatives-keynote">
             Drupal Project Initiatives Keynote
            </a>
            on Wednesday, May 8, 2024, at 09:00 PDT in Room 201-203 Oregon Ballroom.
           </p>
           <p>
            See you there!
           </p>
          </div>
          <div class="field field--name-field-tags field--type-entity-reference field--label-hidden">
           <div class="field--label">
            Tags
           </div>
           <div class="field--items">
            <div class="field--item">
             <span>
              Drupal
             </span>
            </div>
            <div class="field--item">
             <span>
              Performance
             </span>
            </div>
            <div class="field--item">
             <span>
              Gander
             </span>
            </div>
            <div class="field--item">
             <span>
              Testing
             </span>
            </div>
           </div>
          </div>
         </div>
        </article>
       </div>
      </div>
     </div>
    </div>
   </article>
   <hr/>
   <!-- Footer -->
   <footer>
    <div class="container">
     <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
       <ul class="list-inline text-center">
        <li>
         <a href="https://github.com/slashrsm" target="_blank">
          <span class="fa-stack fa-lg">
           <i class="fa fa-circle fa-stack-2x">
           </i>
           <i class="fa-brands fa-github fa-stack-1x fa-inverse">
           </i>
          </span>
         </a>
        </li>
        <li>
         <a href="https://x.com/slashrsm" target="_blank">
          <span class="fa-stack fa-lg">
           <i class="fa fa-circle fa-stack-2x">
           </i>
           <i class="fa-brands fa-x-twitter fa-stack-1x fa-inverse">
           </i>
          </span>
         </a>
        </li>
        <li>
         <a href="https://si.linkedin.com/in/janezurevc" target="_blank">
          <span class="fa-stack fa-lg">
           <i class="fa fa-circle fa-stack-2x">
           </i>
           <i class="fa-brands fa-linkedin fa-stack-1x fa-inverse">
           </i>
          </span>
         </a>
        </li>
       </ul>
      </div>
     </div>
    </div>
   </footer>
  </div>
  <script data-drupal-selector="drupal-settings-json" type="application/json">
  
{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"node","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimit
r":"\u0003","suppressDeprecationErrors":true,"bootstrap":{"forms_has_error_value_toggle":1,"modal_animation":1,"modal_backdrop":"true","modal_focus_input":1,"mo
al_keyboard":1,"modal_show":1,"modal_size":"","popover_enabled":1,"popover_animation":1,"popover_auto_close":1,"popover_container":"body","popover_content":"","
opover_delay":"0","popover_html":0,"popover_placement":"right","popover_selector":"","popover_title":"","popover_trigger":"click","tooltip_enabled":1,"tooltip_a
imation":1,"tooltip_container":"body","tooltip_delay":"0","tooltip_html":0,"tooltip_placement":"auto
left","tooltip_selector":"","tooltip_trigger":"hover"},"disqusComments":"slashrsm","user":{"uid":0,"permissionsHash":"98faaa155a1d3d1c9a77b0c926183091b94fbfa1c6
1b6b55a329d0db91cf226"}}
  </script>
  <script src="../sites/default/files/js/js_AqmDmmXtxeaHVu3xcdG2zyaHEnlZalxy9J6xKDJ1uAI/index.js">
  </script>
  <!--[if lte IE 8]>
<script src="/sites/default/files/js/js_5RH3jC1tW_hjk-Nh0Q_ZFhpL-scB_L3h1PfGSh7kitQ.js"></script>
<![endif]-->
  <script crossorigin="anonymous" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4="
src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js">
  </script>
  <script src="../sites/default/files/js/js_SBPs4Nz8s8sJ8Fu_02wEGLfwObvZDsPxZOtNkHQNtKc/index.js">
  </script>
  <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/highlight.min.js">
  </script>
  <script src="../sites/default/files/js/js_BpR0uWPRfXSLglxmI-MLiWRwWtbnsxDCDenNoWjaMiQ/index.js">
  </script>
 </body>
</html>

